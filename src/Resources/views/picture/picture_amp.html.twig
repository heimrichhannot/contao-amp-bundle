{% if sources|default() %}
    {% for source in sources %}
        <amp-img
                {% if placeholder|default %}
                    placeholder
                {% endif %}
                {% if source.media|default %}
                    media="{{ source.media }}"
                {% endif %}
                {% if alt|default %}
                    alt="{{ alt }}"
                {% endif %}
                src="{{ source.src }}"
                width="{{ source.width }}"
                height="{{ source.height }}"
                layout="responsive"
                {% if source.srcset|default %}
                    srcset="{{ source.srcset }}"
                {% endif %}
                {% if source.sizes|default %}
                    sizes="{{ source.sizes }}"
                {% endif %}
                {% if class|default() or img.class|default() %}
                    class="{{ class|default() ? class|trim : '' }} {{ img.class|default() ? img.class|trim : '' }}"
                {% endif %}
        ></amp-img>
    {% endfor %}
{% elseif img|default() %}
    <amp-img
            {% if alt|default %}
                alt="{{ alt }}"
            {% endif %}
            src="{{ img.src }}"
            {% if img.width|default() and img.height|default() %}
                width="{{ img.width|default() ? img.width : ratio }}"
                height="{{ img.height|default() ? img.height : 1 }}"
                layout="responsive"
            {% else %}
                layout="fill"
            {% endif %}
            {% if img.srcset|default and img.width|default() %}
                srcset="{{ img.srcset }}"
            {% endif %}
            {% if img.sizes|default %}
                sizes="{{ img.sizes }}"
            {% endif %}
            {% if class|default() or img.class|default() %}
                class="{{ class|default() ? class|trim : '' }} {{ img.class|default() ? img.class|trim : '' }}"
            {% endif %}
    ></amp-img>
{% endif %}